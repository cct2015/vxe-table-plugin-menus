"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.VXETablePluginMenus = void 0;

var _xeUtils = _interopRequireDefault(require("xe-utils/methods/xe-utils"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

/* eslint-disable no-unused-vars */

/* eslint-enable no-unused-vars */
var menuMap = {
  /**
   * 清除单元格数据的值
   */
  CLEAR_CELL: function CLEAR_CELL(params) {
    var $table = params.$table,
        row = params.row,
        column = params.column;

    if (row && column) {
      $table.clearData(row, column.property);
    }
  },

  /**
   * 清除行数据的值
   */
  CLEAR_ROW: function CLEAR_ROW(params) {
    var $table = params.$table,
        row = params.row;

    if (row) {
      $table.clearData(row);
    }
  },

  /**
   * 清除选中行数据的值
   */
  CLEAR_SELECTED_ROW: function CLEAR_SELECTED_ROW(params) {
    var $table = params.$table;
    $table.clearData($table.getCheckboxRecords());
  },

  /**
   * 清除所有数据的值
   */
  CLEAR_ALL: function CLEAR_ALL(params) {
    var $table = params.$table;
    $table.clearData();
  },

  /**
   * 还原单元格数据的值
   */
  REVERT_CELL: function REVERT_CELL(params) {
    var $table = params.$table,
        row = params.row,
        column = params.column;

    if (row && column) {
      $table.revertData(row, column.property);
    }
  },

  /**
   * 还原行数据的值
   */
  REVERT_ROW: function REVERT_ROW(params) {
    var $table = params.$table,
        row = params.row;

    if (row) {
      $table.revertData(row);
    }
  },

  /**
   * 还原选中行数据的值
   */
  REVERT_SELECTED_ROW: function REVERT_SELECTED_ROW(params) {
    var $table = params.$table;
    $table.revertData($table.getCheckboxRecords());
  },

  /**
   * 还原所有数据的值
   */
  REVERT_ALL: function REVERT_ALL(params) {
    var $table = params.$table;
    $table.revertData();
  },

  /**
   * 插入数据
   */
  INSERT_ROW: function INSERT_ROW(params) {
    var $table = params.$table,
        menu = params.menu;
    $table.insert(menu.params);
  },

  /**
   * 插入数据并激活编辑状态
   */
  INSERT_ACTIVED_ROW: function INSERT_ACTIVED_ROW(params) {
    var $table = params.$table,
        menu = params.menu,
        column = params.column;
    var args = menu.params || [];
    $table.insert(args[0]).then(function (_ref) {
      var row = _ref.row;
      return $table.setActiveCell(row, args[1] || column.property);
    });
  },

  /**
   * 插入数据到指定位置
   */
  INSERT_AT_ROW: function INSERT_AT_ROW(params) {
    var $table = params.$table,
        menu = params.menu,
        row = params.row;

    if (row) {
      $table.insertAt(menu.params, row);
    }
  },

  /**
   * 插入数据到指定位置并激活编辑状态
   */
  INSERT_AT_ACTIVED_ROW: function INSERT_AT_ACTIVED_ROW(params) {
    var $table = params.$table,
        menu = params.menu,
        row = params.row,
        column = params.column;

    if (row) {
      var args = menu.params || [];
      $table.insertAt(args[0], row).then(function (_ref2) {
        var row = _ref2.row;
        return $table.setActiveCell(row, args[1] || column.property);
      });
    }
  },

  /**
   * 移除行数据
   */
  DELETE_ROW: function DELETE_ROW(params) {
    var $table = params.$table,
        row = params.row;

    if (row) {
      $table.remove(row);
    }
  },

  /**
   * 移除选中行数据
   */
  DELETE_SELECTED_ROW: function DELETE_SELECTED_ROW(params) {
    var $table = params.$table;
    $table.removeCheckboxRow();
  },

  /**
   * 移除所有行数据
   */
  DELETE_ALL: function DELETE_ALL(params) {
    var $table = params.$table;
    $table.remove();
  },

  /**
   * 清除排序条件
   */
  CLEAR_SORT: function CLEAR_SORT(params) {
    var $table = params.$table;
    $table.clearSort();
  },

  /**
   * 按所选列的值升序
   */
  SORT_ASC: function SORT_ASC(params) {
    var $table = params.$table,
        column = params.column;

    if (column) {
      $table.sort(column.property, 'asc');
    }
  },

  /**
   * 按所选列的值倒序
   */
  SORT_DESC: function SORT_DESC(params) {
    var $table = params.$table,
        column = params.column;

    if (column) {
      $table.sort(column.property, 'desc');
    }
  },

  /**
   * 清除选中列的筛选条件
   */
  CLEAR_FILTER: function CLEAR_FILTER(params) {
    var $table = params.$table,
        column = params.column;

    if (column) {
      $table.clearFilter(column);
    }
  },

  /**
   * 清除所有列筛选条件
   */
  CLEAR_ALL_FILTER: function CLEAR_ALL_FILTER(params) {
    var $table = params.$table;
    $table.clearFilter();
  },

  /**
   * 根据单元格值筛选
   */
  FILTER_CELL: function FILTER_CELL(params) {
    var $table = params.$table,
        row = params.row,
        column = params.column;

    if (row && column) {
      var property = column.property,
          filters = column.filters;

      if (filters.length) {
        var option = filters[0];
        option.data = _xeUtils["default"].get(row, property);
        option.checked = true;
        $table.updateData();
      }
    }
  },

  /**
   * 导出行数据
   */
  EXPORT_ROW: function EXPORT_ROW(params) {
    var $table = params.$table,
        menu = params.menu,
        row = params.row;

    if (row) {
      var opts = {
        data: [row]
      };
      $table.exportData(_xeUtils["default"].assign(opts, menu.params[0]));
    }
  },

  /**
   * 导出选中行数据
   */
  EXPORT_SELECTED_ROW: function EXPORT_SELECTED_ROW(params) {
    var $table = params.$table,
        menu = params.menu;
    var opts = {
      data: $table.getCheckboxRecords()
    };
    $table.exportData(_xeUtils["default"].assign(opts, menu.params[0]));
  },

  /**
   * 导出所有行数据
   */
  EXPORT_ALL: function EXPORT_ALL(params) {
    var $table = params.$table,
        menu = params.menu;
    $table.exportData(menu.params);
  },

  /**
   * 打印所有行数据
   */
  PRINT_ALL: function PRINT_ALL(params) {
    var $table = params.$table,
        menu = params.menu;
    $table.print(menu.params);
  },

  /**
   * 打印选中行
   */
  PRINT_SELECTED_ROW: function PRINT_SELECTED_ROW(params) {
    var $table = params.$table,
        menu = params.menu;
    var opts = {
      data: $table.getCheckboxRecords()
    };
    $table.print(_xeUtils["default"].assign(opts, menu.params));
  },

  /**
   * 隐藏当前列
   */
  HIDDEN_COLUMN: function HIDDEN_COLUMN(params) {
    var $table = params.$table,
        column = params.column;

    if (column) {
      $table.hideColumn(column);
    }
  },

  /**
   * 重置列的可视状态
   */
  RESET_COLUMN: function RESET_COLUMN(params) {
    var $table = params.$table;
    $table.resetColumn({
      visible: true,
      resizable: false
    });
  },

  /**
   * 重置列宽状态
   */
  RESET_RESIZABLE: function RESET_RESIZABLE(params) {
    var $table = params.$table;
    $table.resetColumn({
      visible: false,
      resizable: true
    });
  },

  /**
   * 重置列的所有状态
   */
  RESET_ALL: function RESET_ALL(params) {
    var $table = params.$table;
    $table.resetColumn(true);
  }
};

function checkPrivilege(item, params) {
  var code = item.code;
  var columns = params.columns,
      column = params.column;

  switch (code) {
    case 'CLEAR_SORT':
      item.disabled = !columns.some(function (column) {
        return column.sortable && column.order;
      });
      break;

    case 'CLEAR_ALL_FILTER':
      item.disabled = !columns.some(function (column) {
        return column.filters && column.filters.some(function (option) {
          return option.checked;
        });
      });
      break;

    case 'CLEAR_CELL':
    case 'CLEAR_ROW':
    case 'REVERT_CELL':
    case 'REVERT_ROW':
    case 'INSERT_AT_ROW':
    case 'INSERT_AT_ACTIVED_ROW':
    case 'DELETE_ROW':
    case 'SORT_ASC':
    case 'SORT_DESC':
    case 'CLEAR_FILTER':
    case 'FILTER_CELL':
    case 'EXPORT_ROW':
    case 'HIDDEN_COLUMN':
      item.disabled = !column;

      if (column) {
        switch (code) {
          case 'SORT_ASC':
          case 'SORT_DESC':
            item.disabled = !column.sortable;
            break;

          case 'FILTER_CELL':
          case 'CLEAR_FILTER':
            item.disabled = !column.filters || !column.filters.length;

            if (!item.disabled) {
              switch (code) {
                case 'CLEAR_FILTER':
                  item.disabled = !column.filters.some(function (option) {
                    return option.checked;
                  });
                  break;
              }
            }

            break;
        }
      }

      break;
  }
}

function handlePrivilegeEvent(params) {
  params.options.forEach(function (list) {
    list.forEach(function (item) {
      checkPrivilege(item, params);

      if (item.children) {
        item.children.forEach(function (child) {
          checkPrivilege(child, params);
        });
      }
    });
  });
}
/**
 * 基于 vxe-table 表格的增强插件，提供实用的快捷菜单集
 */


var VXETablePluginMenus = {
  install: function install(_ref3) {
    var interceptor = _ref3.interceptor,
        menus = _ref3.menus;
    interceptor.add('event.showMenu', handlePrivilegeEvent);
    menus.mixin(menuMap);
  }
};
exports.VXETablePluginMenus = VXETablePluginMenus;

if (typeof window !== 'undefined' && window.VXETable) {
  window.VXETable.use(VXETablePluginMenus);
}

var _default = VXETablePluginMenus;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbIm1lbnVNYXAiLCJDTEVBUl9DRUxMIiwicGFyYW1zIiwiJHRhYmxlIiwicm93IiwiY29sdW1uIiwiY2xlYXJEYXRhIiwicHJvcGVydHkiLCJDTEVBUl9ST1ciLCJDTEVBUl9TRUxFQ1RFRF9ST1ciLCJnZXRDaGVja2JveFJlY29yZHMiLCJDTEVBUl9BTEwiLCJSRVZFUlRfQ0VMTCIsInJldmVydERhdGEiLCJSRVZFUlRfUk9XIiwiUkVWRVJUX1NFTEVDVEVEX1JPVyIsIlJFVkVSVF9BTEwiLCJJTlNFUlRfUk9XIiwibWVudSIsImluc2VydCIsIklOU0VSVF9BQ1RJVkVEX1JPVyIsImFyZ3MiLCJ0aGVuIiwic2V0QWN0aXZlQ2VsbCIsIklOU0VSVF9BVF9ST1ciLCJpbnNlcnRBdCIsIklOU0VSVF9BVF9BQ1RJVkVEX1JPVyIsIkRFTEVURV9ST1ciLCJyZW1vdmUiLCJERUxFVEVfU0VMRUNURURfUk9XIiwicmVtb3ZlQ2hlY2tib3hSb3ciLCJERUxFVEVfQUxMIiwiQ0xFQVJfU09SVCIsImNsZWFyU29ydCIsIlNPUlRfQVNDIiwic29ydCIsIlNPUlRfREVTQyIsIkNMRUFSX0ZJTFRFUiIsImNsZWFyRmlsdGVyIiwiQ0xFQVJfQUxMX0ZJTFRFUiIsIkZJTFRFUl9DRUxMIiwiZmlsdGVycyIsImxlbmd0aCIsIm9wdGlvbiIsImRhdGEiLCJYRVV0aWxzIiwiZ2V0IiwiY2hlY2tlZCIsInVwZGF0ZURhdGEiLCJFWFBPUlRfUk9XIiwib3B0cyIsImV4cG9ydERhdGEiLCJhc3NpZ24iLCJFWFBPUlRfU0VMRUNURURfUk9XIiwiRVhQT1JUX0FMTCIsIlBSSU5UX0FMTCIsInByaW50IiwiUFJJTlRfU0VMRUNURURfUk9XIiwiSElEREVOX0NPTFVNTiIsImhpZGVDb2x1bW4iLCJSRVNFVF9DT0xVTU4iLCJyZXNldENvbHVtbiIsInZpc2libGUiLCJyZXNpemFibGUiLCJSRVNFVF9SRVNJWkFCTEUiLCJSRVNFVF9BTEwiLCJjaGVja1ByaXZpbGVnZSIsIml0ZW0iLCJjb2RlIiwiY29sdW1ucyIsImRpc2FibGVkIiwic29tZSIsInNvcnRhYmxlIiwib3JkZXIiLCJoYW5kbGVQcml2aWxlZ2VFdmVudCIsIm9wdGlvbnMiLCJmb3JFYWNoIiwibGlzdCIsImNoaWxkcmVuIiwiY2hpbGQiLCJWWEVUYWJsZVBsdWdpbk1lbnVzIiwiaW5zdGFsbCIsImludGVyY2VwdG9yIiwibWVudXMiLCJhZGQiLCJtaXhpbiIsIndpbmRvdyIsIlZYRVRhYmxlIiwidXNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0E7Ozs7QUFEQTs7QUFTQTtBQUVBLElBQU1BLE9BQU8sR0FBRztBQUNkOzs7QUFHQUMsRUFBQUEsVUFKYyxzQkFJRkMsTUFKRSxFQUlvQjtBQUFBLFFBQ3hCQyxNQUR3QixHQUNBRCxNQURBLENBQ3hCQyxNQUR3QjtBQUFBLFFBQ2hCQyxHQURnQixHQUNBRixNQURBLENBQ2hCRSxHQURnQjtBQUFBLFFBQ1hDLE1BRFcsR0FDQUgsTUFEQSxDQUNYRyxNQURXOztBQUVoQyxRQUFJRCxHQUFHLElBQUlDLE1BQVgsRUFBbUI7QUFDakJGLE1BQUFBLE1BQU0sQ0FBQ0csU0FBUCxDQUFpQkYsR0FBakIsRUFBc0JDLE1BQU0sQ0FBQ0UsUUFBN0I7QUFDRDtBQUNGLEdBVGE7O0FBVWQ7OztBQUdBQyxFQUFBQSxTQWJjLHFCQWFITixNQWJHLEVBYW1CO0FBQUEsUUFDdkJDLE1BRHVCLEdBQ1BELE1BRE8sQ0FDdkJDLE1BRHVCO0FBQUEsUUFDZkMsR0FEZSxHQUNQRixNQURPLENBQ2ZFLEdBRGU7O0FBRS9CLFFBQUlBLEdBQUosRUFBUztBQUNQRCxNQUFBQSxNQUFNLENBQUNHLFNBQVAsQ0FBaUJGLEdBQWpCO0FBQ0Q7QUFDRixHQWxCYTs7QUFtQmQ7OztBQUdBSyxFQUFBQSxrQkF0QmMsOEJBc0JNUCxNQXRCTixFQXNCNEI7QUFBQSxRQUNoQ0MsTUFEZ0MsR0FDckJELE1BRHFCLENBQ2hDQyxNQURnQztBQUV4Q0EsSUFBQUEsTUFBTSxDQUFDRyxTQUFQLENB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LENBQWEsVUFBQ1QsSUFBRCxFQUFTO0FBQ3BCRCxNQUFBQSxjQUFjLENBQUNDLElBQUQsRUFBT2pFLE1BQVAsQ0FBZDs7QUFDQSxVQUFJaUUsSUFBSSxDQUFDVyxRQUFULEVBQW1CO0FBQ2pCWCxRQUFBQSxJQUFJLENBQUNXLFFBQUwsQ0FBY0YsT0FBZCxDQUFzQixVQUFDRyxLQUFELEVBQVU7QUFDOUJiLFVBQUFBLGNBQWMsQ0FBQ2EsS0FBRCxFQUFRN0UsTUFBUixDQUFkO0FBQ0QsU0FGRDtBQUdEO0FBQ0YsS0FQRDtBQVFELEdBVEQ7QUFVRDtBQUVEOzs7OztBQUdPLElBQU04RSxtQkFBbUIsR0FBRztBQUNqQ0MsRUFBQUEsT0FEaUMsMEJBQ2U7QUFBQSxRQUFyQ0MsV0FBcUMsU0FBckNBLFdBQXFDO0FBQUEsUUFBeEJDLEtBQXdCLFNBQXhCQSxLQUF3QjtBQUM5Q0QsSUFBQUEsV0FBVyxDQUFDRSxHQUFaLENBQWdCLGdCQUFoQixFQUFrQ1Ysb0JBQWxDO0FBQ0FTLElBQUFBLEtBQUssQ0FBQ0UsS0FBTixDQUFZckYsT0FBWjtBQUNEO0FBSmdDLENBQTVCOzs7QUFPUCxJQUFJLE9BQU9zRixNQUFQLEtBQWtCLFdBQWxCLElBQWlDQSxNQUFNLENBQUNDLFFBQTVDLEVBQXNEO0FBQ3BERCxFQUFBQSxNQUFNLENBQUNDLFFBQVAsQ0FBZ0JDLEdBQWhCLENBQW9CUixtQkFBcEI7QUFDRDs7ZUFFY0EsbUIiLCJmaWxlIjoiaW5kZXguY29tbW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cclxuaW1wb3J0IFhFVXRpbHMgZnJvbSAneGUtdXRpbHMvbWV0aG9kcy94ZS11dGlscydcclxuaW1wb3J0IHtcclxuICBWWEVUYWJsZSxcclxuICBNZW51TGlua1BhcmFtcyxcclxuICBJbnRlcmNlcHRvck1lbnVQYXJhbXMsXHJcbiAgTWVudUZpcnN0T3B0aW9uLFxyXG4gIE1lbnVDaGlsZE9wdGlvblxyXG59IGZyb20gJ3Z4ZS10YWJsZS9saWIvdnhlLXRhYmxlJ1xyXG4vKiBlc2xpbnQtZW5hYmxlIG5vLXVudXNlZC12YXJzICovXHJcblxyXG5jb25zdCBtZW51TWFwID0ge1xyXG4gIC8qKlxyXG4gICAqIOa4hemZpOWNleWFg+agvOaVsOaNrueahOWAvFxyXG4gICAqL1xyXG4gIENMRUFSX0NFTEwgKHBhcmFtczogTWVudUxpbmtQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgJHRhYmxlLCByb3csIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgICBpZiAocm93ICYmIGNvbHVtbikge1xyXG4gICAgICAkdGFibGUuY2xlYXJEYXRhKHJvdywgY29sdW1uLnByb3BlcnR5KVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICog5riF6Zmk6KGM5pWw5o2u55qE5YC8XHJcbiAgICovXHJcbiAgQ0xFQVJfUk9XIChwYXJhbXM6IE1lbnVMaW5rUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSwgcm93IH0gPSBwYXJhbXNcclxuICAgIGlmIChyb3cpIHtcclxuICAgICAgJHRhYmxlLmNsZWFyRGF0YShyb3cpXHJcbiAgICB9XHJcbiAgfSxcclxuICAvKipcclxuICAgKiDmuIXpmaTpgInkuK3ooYzmlbDmja7nmoTlgLxcclxuICAgKi9cclxuICBDTEVBUl9TRUxFQ1RFRF9ST1cgKHBhcmFtczogTWVudUxpbmtQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgJHRhYmxlIH0gPSBwYXJhbXNcclxuICAgICR0YWJsZS5jbGVhckRhdGEoJHRhYmxlLmdldENoZWNrYm94UmVjb3JkcygpKVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICog5riF6Zmk5omA5pyJ5pWw5o2u55qE5YC8XHJcbiAgICovXHJcbiAgQ0xFQVJfQUxMIChwYXJhbXM6IE1lbnVMaW5rUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSB9ID0gcGFyYW1zXHJcbiAgICAkdGFibGUuY2xlYXJEYXRhKClcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIOi/mOWOn+WNleWFg+agvOaVsOaNrueahOWAvFxyXG4gICAqL1xyXG4gIFJFVkVSVF9DRUxMIChwYXJhbXM6IE1lbnVMaW5rUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSwgcm93LCBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gICAgaWYgKHJvdyAmJiBjb2x1bW4pIHtcclxuICAgICAgJHRhYmxlLnJldmVydERhdGEocm93LCBjb2x1bW4ucHJvcGVydHkpXHJcbiAgICB9XHJcbiAgfSxcclxuICAvKipcclxuICAgKiDov5jljp/ooYzmlbDmja7nmoTlgLxcclxuICAgKi9cclxuICBSRVZFUlRfUk9XIChwYXJhbXM6IE1lbnVMaW5rUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSwgcm93IH0gPSBwYXJhbXNcclxuICAgIGlmIChyb3cpIHtcclxuICAgICAgJHRhYmxlLnJldmVydERhdGEocm93KVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICog6L+Y5Y6f6YCJ5Lit6KGM5pWw5o2u55qE5YC8XHJcbiAgICovXHJcbiAgUkVWRVJUX1NFTEVDVEVEX1JPVyAocGFyYW1zOiBNZW51TGlua1BhcmFtcykge1xyXG4gICAgY29uc3QgeyAkdGFibGUgfSA9IHBhcmFtc1xyXG4gICAgJHRhYmxlLnJldmVydERhdGEoJHRhYmxlLmdldENoZWNrYm94UmVjb3JkcygpKVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICog6L+Y5Y6f5omA5pyJ5pWw5o2u55qE5YC8XHJcbiAgICovXHJcbiAgUkVWRVJUX0FMTCAocGFyYW1zOiBNZW51TGlua1BhcmFtcykge1xyXG4gICAgY29uc3QgeyAkdGFibGUgfSA9IHBhcmFtc1xyXG4gICAgJHRhYmxlLnJldmVydERhdGEoKVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICog5o+S5YWl5pWw5o2uXHJcbiAgICovXHJcbiAgSU5TRVJUX1JPVyAocGFyYW1zOiBNZW51TGlua1BhcmFtcykge1xyXG4gICAgY29uc3QgeyAkdGFibGUsIG1lbnUgfSA9IHBhcmFtc1xyXG4gICAgJHRhYmxlLmluc2VydChtZW51LnBhcmFtcylcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIOaPkuWFpeaVsOaNruW5tua/gOa0u+e8lui+keeKtuaAgVxyXG4gICAqL1xyXG4gIElOU0VSVF9BQ1RJVkVEX1JPVyAocGFyYW1zOiBNZW51TGlua1BhcmFtcykge1xyXG4gICAgY29uc3QgeyAkdGFibGUsIG1lbnUsIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgICBjb25zdCBhcmdzOiBhbnlbXSA9IG1lbnUucGFyYW1zIHx8IFtdXHJcbiAgICAkdGFibGUuaW5zZXJ0KGFyZ3NbMF0pXHJcbiAgICAgIC50aGVuKCh7IHJvdyB9KSA9PiAkdGFibGUuc2V0QWN0aXZlQ2VsbChyb3csIGFyZ3NbMV0gfHwgY29sdW1uLnByb3BlcnR5KSlcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIOaPkuWFpeaVsOaNruWIsOaMh+WumuS9jee9rlxyXG4gICAqL1xyXG4gIElOU0VSVF9BVF9ST1cgKHBhcmFtczogTWVudUxpbmtQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgJHRhYmxlLCBtZW51LCByb3cgfSA9IHBhcmFtc1xyXG4gICAgaWYgKHJvdykge1xyXG4gICAgICAkdGFibGUuaW5zZXJ0QXQobWVudS5wYXJhbXMsIHJvdylcclxuICAgIH1cclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIOaPkuWFpeaVsOaNruWIsOaMh+WumuS9jee9ruW5tua/gOa0u+e8lui+keeKtuaAgVxyXG4gICAqL1xyXG4gIElOU0VSVF9BVF9BQ1RJVkVEX1JPVyAocGFyYW1zOiBNZW51TGlua1BhcmFtcykge1xyXG4gICAgY29uc3QgeyAkdGFibGUsIG1lbnUsIHJvdywgY29sdW1uIH0gPSBwYXJhbXNcclxuICAgIGlmIChyb3cpIHtcclxuICAgICAgY29uc3QgYXJnczogYW55W10gPSBtZW51LnBhcmFtcyB8fCBbXVxyXG4gICAgICAkdGFibGUuaW5zZXJ0QXQoYXJnc1swXSwgcm93KVxyXG4gICAgICAgIC50aGVuKCh7IHJvdyB9KSA9PiAkdGFibGUuc2V0QWN0aXZlQ2VsbChyb3csIGFyZ3NbMV0gfHwgY29sdW1uLnByb3BlcnR5KSlcclxuICAgIH1cclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIOenu+mZpOihjOaVsOaNrlxyXG4gICAqL1xyXG4gIERFTEVURV9ST1cgKHBhcmFtczogTWVudUxpbmtQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgJHRhYmxlLCByb3cgfSA9IHBhcmFtc1xyXG4gICAgaWYgKHJvdykge1xyXG4gICAgICAkdGFibGUucmVtb3ZlKHJvdylcclxuICAgIH1cclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIOenu+mZpOmAieS4reihjOaVsOaNrlxyXG4gICAqL1xyXG4gIERFTEVURV9TRUxFQ1RFRF9ST1cgKHBhcmFtczogTWVudUxpbmtQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgJHRhYmxlIH0gPSBwYXJhbXNcclxuICAgICR0YWJsZS5yZW1vdmVDaGVja2JveFJvdygpXHJcbiAgfSxcclxuICAvKipcclxuICAgKiDnp7vpmaTmiYDmnInooYzmlbDmja5cclxuICAgKi9cclxuICBERUxFVEVfQUxMIChwYXJhbXM6IE1lbnVMaW5rUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSB9ID0gcGFyYW1zXHJcbiAgICAkdGFibGUucmVtb3ZlKClcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIOa4hemZpOaOkuW6j+adoeS7tlxyXG4gICAqL1xyXG4gIENMRUFSX1NPUlQgKHBhcmFtczogTWVudUxpbmtQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgJHRhYmxlIH0gPSBwYXJhbXNcclxuICAgICR0YWJsZS5jbGVhclNvcnQoKVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICog5oyJ5omA6YCJ5YiX55qE5YC85Y2H5bqPXHJcbiAgICovXHJcbiAgU09SVF9BU0MgKHBhcmFtczogTWVudUxpbmtQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgJHRhYmxlLCBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gICAgaWYgKGNvbHVtbikge1xyXG4gICAgICAkdGFibGUuc29ydChjb2x1bW4ucHJvcGVydHksICdhc2MnKVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICog5oyJ5omA6YCJ5YiX55qE5YC85YCS5bqPXHJcbiAgICovXHJcbiAgU09SVF9ERVNDIChwYXJhbXM6IE1lbnVMaW5rUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSwgY29sdW1uIH0gPSBwYXJhbXNcclxuICAgIGlmIChjb2x1bW4pIHtcclxuICAgICAgJHRhYmxlLnNvcnQoY29sdW1uLnByb3BlcnR5LCAnZGVzYycpXHJcbiAgICB9XHJcbiAgfSxcclxuICAvKipcclxuICAgKiDmuIXpmaTpgInkuK3liJfnmoTnrZvpgInmnaHku7ZcclxuICAgKi9cclxuICBDTEVBUl9GSUxURVIgKHBhcmFtczogTWVudUxpbmtQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgJHRhYmxlLCBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gICAgaWYgKGNvbHVtbikge1xyXG4gICAgICAkdGFibGUuY2xlYXJGaWx0ZXIoY29sdW1uKVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICog5riF6Zmk5omA5pyJ5YiX562b6YCJ5p2h5Lu2XHJcbiAgICovXHJcbiAgQ0xFQVJfQUxMX0ZJTFRFUiAocGFyYW1zOiBNZW51TGlua1BhcmFtcykge1xyXG4gICAgY29uc3QgeyAkdGFibGUgfSA9IHBhcmFtc1xyXG4gICAgJHRhYmxlLmNsZWFyRmlsdGVyKClcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIOagueaNruWNleWFg+agvOWAvOetm+mAiVxyXG4gICAqL1xyXG4gIEZJTFRFUl9DRUxMIChwYXJhbXM6IE1lbnVMaW5rUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSwgcm93LCBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gICAgaWYgKHJvdyAmJiBjb2x1bW4pIHtcclxuICAgICAgbGV0IHsgcHJvcGVydHksIGZpbHRlcnMgfSA9IGNvbHVtblxyXG4gICAgICBpZiAoZmlsdGVycy5sZW5ndGgpIHtcclxuICAgICAgICBsZXQgb3B0aW9uID0gZmlsdGVyc1swXVxyXG4gICAgICAgIG9wdGlvbi5kYXRhID0gWEVVdGlscy5nZXQocm93LCBwcm9wZXJ0eSlcclxuICAgICAgICBvcHRpb24uY2hlY2tlZCA9IHRydWVcclxuICAgICAgICAkdGFibGUudXBkYXRlRGF0YSgpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIOWvvOWHuuihjOaVsOaNrlxyXG4gICAqL1xyXG4gIEVYUE9SVF9ST1cgKHBhcmFtczogTWVudUxpbmtQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgJHRhYmxlLCBtZW51LCByb3cgfSA9IHBhcmFtc1xyXG4gICAgaWYgKHJvdykge1xyXG4gICAgICBsZXQgb3B0cyA9IHsgZGF0YTogW3Jvd10gfVxyXG4gICAgICAkdGFibGUuZXhwb3J0RGF0YShYRVV0aWxzLmFzc2lnbihvcHRzLCBtZW51LnBhcmFtc1swXSkpXHJcbiAgICB9XHJcbiAgfSxcclxuICAvKipcclxuICAgKiDlr7zlh7rpgInkuK3ooYzmlbDmja5cclxuICAgKi9cclxuICBFWFBPUlRfU0VMRUNURURfUk9XIChwYXJhbXM6IE1lbnVMaW5rUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSwgbWVudSB9ID0gcGFyYW1zXHJcbiAgICBsZXQgb3B0cyA9IHsgZGF0YTogJHRhYmxlLmdldENoZWNrYm94UmVjb3JkcygpIH1cclxuICAgICR0YWJsZS5leHBvcnREYXRhKFhFVXRpbHMuYXNzaWduKG9wdHMsIG1lbnUucGFyYW1zWzBdKSlcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIOWvvOWHuuaJgOacieihjOaVsOaNrlxyXG4gICAqL1xyXG4gIEVYUE9SVF9BTEwgKHBhcmFtczogTWVudUxpbmtQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgJHRhYmxlLCBtZW51IH0gPSBwYXJhbXNcclxuICAgICR0YWJsZS5leHBvcnREYXRhKG1lbnUucGFyYW1zKVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICog5omT5Y2w5omA5pyJ6KGM5pWw5o2uXHJcbiAgICovXHJcbiAgUFJJTlRfQUxMIChwYXJhbXM6IE1lbnVMaW5rUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSwgbWVudSB9ID0gcGFyYW1zXHJcbiAgICAkdGFibGUucHJpbnQobWVudS5wYXJhbXMpXHJcbiAgfSxcclxuICAvKipcclxuICAgKiDmiZPljbDpgInkuK3ooYxcclxuICAgKi9cclxuICBQUklOVF9TRUxFQ1RFRF9ST1cgKHBhcmFtczogTWVudUxpbmtQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgJHRhYmxlLCBtZW51IH0gPSBwYXJhbXNcclxuICAgIGxldCBvcHRzID0geyBkYXRhOiAkdGFibGUuZ2V0Q2hlY2tib3hSZWNvcmRzKCkgfVxyXG4gICAgJHRhYmxlLnByaW50KFhFVXRpbHMuYXNzaWduKG9wdHMsIG1lbnUucGFyYW1zKSlcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIOmakOiXj+W9k+WJjeWIl1xyXG4gICAqL1xyXG4gIEhJRERFTl9DT0xVTU4gKHBhcmFtczogTWVudUxpbmtQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgJHRhYmxlLCBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gICAgaWYgKGNvbHVtbikge1xyXG4gICAgICAkdGFibGUuaGlkZUNvbHVtbihjb2x1bW4pXHJcbiAgICB9XHJcbiAgfSxcclxuICAvKipcclxuICAgKiDph43nva7liJfnmoTlj6/op4bnirbmgIFcclxuICAgKi9cclxuICBSRVNFVF9DT0xVTU4gKHBhcmFtczogTWVudUxpbmtQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgJHRhYmxlIH0gPSBwYXJhbXNcclxuICAgICR0YWJsZS5yZXNldENvbHVtbih7IHZpc2libGU6IHRydWUsIHJlc2l6YWJsZTogZmFsc2UgfSlcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIOmHjee9ruWIl+WuveeKtuaAgVxyXG4gICAqL1xyXG4gIFJFU0VUX1JFU0laQUJMRSAocGFyYW1zOiBNZW51TGlua1BhcmFtcykge1xyXG4gICAgY29uc3QgeyAkdGFibGUgfSA9IHBhcmFtc1xyXG4gICAgJHRhYmxlLnJlc2V0Q29sdW1uKHsgdmlzaWJsZTogZmFsc2UsIHJlc2l6YWJsZTogdHJ1ZSB9KVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICog6YeN572u5YiX55qE5omA5pyJ54q25oCBXHJcbiAgICovXHJcbiAgUkVTRVRfQUxMIChwYXJhbXM6IE1lbnVMaW5rUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSB9ID0gcGFyYW1zXHJcbiAgICAkdGFibGUucmVzZXRDb2x1bW4odHJ1ZSlcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrUHJpdmlsZWdlIChpdGVtOiBNZW51Rmlyc3RPcHRpb24gfCBNZW51Q2hpbGRPcHRpb24sIHBhcmFtczogSW50ZXJjZXB0b3JNZW51UGFyYW1zKSB7XHJcbiAgbGV0IHsgY29kZSB9ID0gaXRlbVxyXG4gIGxldCB7IGNvbHVtbnMsIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgc3dpdGNoIChjb2RlKSB7XHJcbiAgICBjYXNlICdDTEVBUl9TT1JUJzpcclxuICAgICAgaXRlbS5kaXNhYmxlZCA9ICFjb2x1bW5zLnNvbWUoKGNvbHVtbikgPT4gY29sdW1uLnNvcnRhYmxlICYmIGNvbHVtbi5vcmRlcilcclxuICAgICAgYnJlYWtcclxuICAgIGNhc2UgJ0NMRUFSX0FMTF9GSUxURVInOlxyXG4gICAgICBpdGVtLmRpc2FibGVkID0gIWNvbHVtbnMuc29tZSgoY29sdW1uKSA9PiBjb2x1bW4uZmlsdGVycyAmJiBjb2x1bW4uZmlsdGVycy5zb21lKChvcHRpb24pID0+IG9wdGlvbi5jaGVja2VkKSlcclxuICAgICAgYnJlYWtcclxuICAgIGNhc2UgJ0NMRUFSX0NFTEwnOlxyXG4gICAgY2FzZSAnQ0xFQVJfUk9XJzpcclxuICAgIGNhc2UgJ1JFVkVSVF9DRUxMJzpcclxuICAgIGNhc2UgJ1JFVkVSVF9ST1cnOlxyXG4gICAgY2FzZSAnSU5TRVJUX0FUX1JPVyc6XHJcbiAgICBjYXNlICdJTlNFUlRfQVRfQUNUSVZFRF9ST1cnOlxyXG4gICAgY2FzZSAnREVMRVRFX1JPVyc6XHJcbiAgICBjYXNlICdTT1JUX0FTQyc6XHJcbiAgICBjYXNlICdTT1JUX0RFU0MnOlxyXG4gICAgY2FzZSAnQ0xFQVJfRklMVEVSJzpcclxuICAgIGNhc2UgJ0ZJTFRFUl9DRUxMJzpcclxuICAgIGNhc2UgJ0VYUE9SVF9ST1cnOlxyXG4gICAgY2FzZSAnSElEREVOX0NPTFVNTic6XHJcbiAgICAgIGl0ZW0uZGlzYWJsZWQgPSAhY29sdW1uXHJcbiAgICAgIGlmIChjb2x1bW4pIHtcclxuICAgICAgICBzd2l0Y2ggKGNvZGUpIHtcclxuICAgICAgICAgIGNhc2UgJ1NPUlRfQVNDJzpcclxuICAgICAgICAgIGNhc2UgJ1NPUlRfREVTQyc6XHJcbiAgICAgICAgICAgIGl0ZW0uZGlzYWJsZWQgPSAhY29sdW1uLnNvcnRhYmxlXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdGSUxURVJfQ0VMTCc6XHJcbiAgICAgICAgICBjYXNlICdDTEVBUl9GSUxURVInOlxyXG4gICAgICAgICAgICBpdGVtLmRpc2FibGVkID0gIWNvbHVtbi5maWx0ZXJzIHx8ICFjb2x1bW4uZmlsdGVycy5sZW5ndGhcclxuICAgICAgICAgICAgaWYgKCFpdGVtLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgICAgc3dpdGNoIChjb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdDTEVBUl9GSUxURVInOlxyXG4gICAgICAgICAgICAgICAgICBpdGVtLmRpc2FibGVkID0gIWNvbHVtbi5maWx0ZXJzLnNvbWUoKG9wdGlvbikgPT4gb3B0aW9uLmNoZWNrZWQpXHJcbiAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGJyZWFrXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcml2aWxlZ2VFdmVudCAocGFyYW1zOiBJbnRlcmNlcHRvck1lbnVQYXJhbXMpIHtcclxuICBwYXJhbXMub3B0aW9ucy5mb3JFYWNoKChsaXN0KSA9PiB7XHJcbiAgICBsaXN0LmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgY2hlY2tQcml2aWxlZ2UoaXRlbSwgcGFyYW1zKVxyXG4gICAgICBpZiAoaXRlbS5jaGlsZHJlbikge1xyXG4gICAgICAgIGl0ZW0uY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcclxuICAgICAgICAgIGNoZWNrUHJpdmlsZWdlKGNoaWxkLCBwYXJhbXMpXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9KVxyXG59XHJcblxyXG4vKipcclxuICog5Z+65LqOIHZ4ZS10YWJsZSDooajmoLznmoTlop7lvLrmj5Lku7bvvIzmj5Dkvpvlrp7nlKjnmoTlv6vmjbfoj5zljZXpm4ZcclxuICovXHJcbmV4cG9ydCBjb25zdCBWWEVUYWJsZVBsdWdpbk1lbnVzID0ge1xyXG4gIGluc3RhbGwgKHsgaW50ZXJjZXB0b3IsIG1lbnVzIH06IHR5cGVvZiBWWEVUYWJsZSkge1xyXG4gICAgaW50ZXJjZXB0b3IuYWRkKCdldmVudC5zaG93TWVudScsIGhhbmRsZVByaXZpbGVnZUV2ZW50KVxyXG4gICAgbWVudXMubWl4aW4obWVudU1hcClcclxuICB9XHJcbn1cclxuXHJcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuVlhFVGFibGUpIHtcclxuICB3aW5kb3cuVlhFVGFibGUudXNlKFZYRVRhYmxlUGx1Z2luTWVudXMpXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFZYRVRhYmxlUGx1Z2luTWVudXNcclxuIl19
