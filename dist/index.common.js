"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.VXETablePluginMenus = void 0;

var _xeUtils = _interopRequireDefault(require("xe-utils/methods/xe-utils"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

/* eslint-disable no-unused-vars */

/* eslint-enable no-unused-vars */
function handleFixedColumn(fixed) {
  return function (params) {
    var $table = params.$table,
        column = params.column;

    _xeUtils["default"].eachTree([column], function (column) {
      column.fixed = fixed;
    });

    $table.refreshColumn();
  };
}

var menuMap = {
  /**
   * 清除单元格数据的值
   */
  CLEAR_CELL: function CLEAR_CELL(params) {
    var $table = params.$table,
        row = params.row,
        column = params.column;

    if (row && column) {
      $table.clearData(row, column.property);
    }
  },

  /**
   * 清除行数据的值
   */
  CLEAR_ROW: function CLEAR_ROW(params) {
    var $table = params.$table,
        row = params.row;

    if (row) {
      $table.clearData(row);
    }
  },

  /**
   * 清除选中行数据的值
   */
  CLEAR_SELECTED_ROW: function CLEAR_SELECTED_ROW(params) {
    var $table = params.$table;
    $table.clearData($table.getCheckboxRecords());
  },

  /**
   * 清除所有数据的值
   */
  CLEAR_ALL: function CLEAR_ALL(params) {
    var $table = params.$table;
    $table.clearData();
  },

  /**
   * 还原单元格数据的值
   */
  REVERT_CELL: function REVERT_CELL(params) {
    var $table = params.$table,
        row = params.row,
        column = params.column;

    if (row && column) {
      $table.revertData(row, column.property);
    }
  },

  /**
   * 还原行数据的值
   */
  REVERT_ROW: function REVERT_ROW(params) {
    var $table = params.$table,
        row = params.row;

    if (row) {
      $table.revertData(row);
    }
  },

  /**
   * 还原选中行数据的值
   */
  REVERT_SELECTED_ROW: function REVERT_SELECTED_ROW(params) {
    var $table = params.$table;
    $table.revertData($table.getCheckboxRecords());
  },

  /**
   * 还原所有数据的值
   */
  REVERT_ALL: function REVERT_ALL(params) {
    var $table = params.$table;
    $table.revertData();
  },

  /**
   * 插入数据
   */
  INSERT_ROW: function INSERT_ROW(params) {
    var $table = params.$table,
        menu = params.menu;
    $table.insert(menu.params);
  },

  /**
   * 插入数据并激活编辑状态
   */
  INSERT_ACTIVED_ROW: function INSERT_ACTIVED_ROW(params) {
    var $table = params.$table,
        menu = params.menu,
        column = params.column;
    var args = menu.params || [];
    $table.insert(args[0]).then(function (_ref) {
      var row = _ref.row;
      return $table.setActiveCell(row, args[1] || column.property);
    });
  },

  /**
   * 插入数据到指定位置
   */
  INSERT_AT_ROW: function INSERT_AT_ROW(params) {
    var $table = params.$table,
        menu = params.menu,
        row = params.row;

    if (row) {
      $table.insertAt(menu.params, row);
    }
  },

  /**
   * 插入数据到指定位置并激活编辑状态
   */
  INSERT_AT_ACTIVED_ROW: function INSERT_AT_ACTIVED_ROW(params) {
    var $table = params.$table,
        menu = params.menu,
        row = params.row,
        column = params.column;

    if (row) {
      var args = menu.params || [];
      $table.insertAt(args[0], row).then(function (_ref2) {
        var row = _ref2.row;
        return $table.setActiveCell(row, args[1] || column.property);
      });
    }
  },

  /**
   * 移除行数据
   */
  DELETE_ROW: function DELETE_ROW(params) {
    var $table = params.$table,
        row = params.row;

    if (row) {
      $table.remove(row);
    }
  },

  /**
   * 移除选中行数据
   */
  DELETE_SELECTED_ROW: function DELETE_SELECTED_ROW(params) {
    var $table = params.$table;
    $table.removeCheckboxRow();
  },

  /**
   * 移除所有行数据
   */
  DELETE_ALL: function DELETE_ALL(params) {
    var $table = params.$table;
    $table.remove();
  },

  /**
   * 清除排序条件
   */
  CLEAR_SORT: function CLEAR_SORT(params) {
    var $table = params.$table;
    $table.clearSort();
  },

  /**
   * 按所选列的值升序
   */
  SORT_ASC: function SORT_ASC(params) {
    var $table = params.$table,
        column = params.column;

    if (column) {
      $table.sort(column.property, 'asc');
    }
  },

  /**
   * 按所选列的值倒序
   */
  SORT_DESC: function SORT_DESC(params) {
    var $table = params.$table,
        column = params.column;

    if (column) {
      $table.sort(column.property, 'desc');
    }
  },

  /**
   * 清除选中列的筛选条件
   */
  CLEAR_FILTER: function CLEAR_FILTER(params) {
    var $table = params.$table,
        column = params.column;

    if (column) {
      $table.clearFilter(column);
    }
  },

  /**
   * 清除所有列筛选条件
   */
  CLEAR_ALL_FILTER: function CLEAR_ALL_FILTER(params) {
    var $table = params.$table;
    $table.clearFilter();
  },

  /**
   * 根据单元格值筛选
   */
  FILTER_CELL: function FILTER_CELL(params) {
    var $table = params.$table,
        row = params.row,
        column = params.column;

    if (row && column) {
      var property = column.property,
          filters = column.filters;

      if (filters.length) {
        var option = filters[0];
        option.data = _xeUtils["default"].get(row, property);
        option.checked = true;
        $table.updateData();
      }
    }
  },

  /**
   * 导出行数据
   */
  EXPORT_ROW: function EXPORT_ROW(params) {
    var $table = params.$table,
        menu = params.menu,
        row = params.row;

    if (row) {
      var opts = {
        data: [row]
      };
      $table.exportData(_xeUtils["default"].assign(opts, menu.params[0]));
    }
  },

  /**
   * 导出选中行数据
   */
  EXPORT_SELECTED_ROW: function EXPORT_SELECTED_ROW(params) {
    var $table = params.$table,
        menu = params.menu;
    var opts = {
      data: $table.getCheckboxRecords()
    };
    $table.exportData(_xeUtils["default"].assign(opts, menu.params[0]));
  },

  /**
   * 导出所有行数据
   */
  EXPORT_ALL: function EXPORT_ALL(params) {
    var $table = params.$table,
        menu = params.menu;
    $table.exportData(menu.params);
  },

  /**
   * 打印所有行数据
   */
  PRINT_ALL: function PRINT_ALL(params) {
    var $table = params.$table,
        menu = params.menu;
    $table.print(menu.params);
  },

  /**
   * 打印选中行
   */
  PRINT_SELECTED_ROW: function PRINT_SELECTED_ROW(params) {
    var $table = params.$table,
        menu = params.menu;
    var opts = {
      data: $table.getCheckboxRecords()
    };
    $table.print(_xeUtils["default"].assign(opts, menu.params));
  },

  /**
   * 隐藏当前列
   */
  HIDDEN_COLUMN: function HIDDEN_COLUMN(params) {
    var $table = params.$table,
        column = params.column;

    if (column) {
      $table.hideColumn(column);
    }
  },

  /**
   * 将列固定到左侧
   */
  FIXED_LEFT_COLUMN: handleFixedColumn('left'),

  /**
   * 将列固定到右侧
   */
  FIXED_RIGHT_COLUMN: handleFixedColumn('right'),

  /**
   * 清除固定列
   */
  CLEAR_FIXED_COLUMN: handleFixedColumn(''),

  /**
   * 重置列的可视状态
   */
  RESET_COLUMN: function RESET_COLUMN(params) {
    var $table = params.$table;
    $table.resetColumn({
      visible: true,
      resizable: false
    });
  },

  /**
   * 重置列宽状态
   */
  RESET_RESIZABLE: function RESET_RESIZABLE(params) {
    var $table = params.$table;
    $table.resetColumn({
      visible: false,
      resizable: true
    });
  },

  /**
   * 重置列的所有状态
   */
  RESET_ALL: function RESET_ALL(params) {
    var $table = params.$table;
    $table.resetColumn(true);
  }
};

function checkPrivilege(item, params) {
  var code = item.code;
  var columns = params.columns,
      column = params.column;

  switch (code) {
    case 'CLEAR_SORT':
      item.disabled = !columns.some(function (column) {
        return column.sortable && column.order;
      });
      break;

    case 'CLEAR_ALL_FILTER':
      item.disabled = !columns.some(function (column) {
        return column.filters && column.filters.some(function (option) {
          return option.checked;
        });
      });
      break;

    case 'CLEAR_CELL':
    case 'CLEAR_ROW':
    case 'REVERT_CELL':
    case 'REVERT_ROW':
    case 'INSERT_AT_ROW':
    case 'INSERT_AT_ACTIVED_ROW':
    case 'DELETE_ROW':
    case 'SORT_ASC':
    case 'SORT_DESC':
    case 'CLEAR_FILTER':
    case 'FILTER_CELL':
    case 'EXPORT_ROW':
    case 'HIDDEN_COLUMN':
    case 'FIXED_LEFT_COLUMN':
    case 'FIXED_RIGHT_COLUMN':
    case 'CLEAR_FIXED_COLUMN':
      item.disabled = !column;

      if (column) {
        var isChildCol = !!column.parentId;

        switch (code) {
          case 'SORT_ASC':
          case 'SORT_DESC':
            item.disabled = !column.sortable;
            break;

          case 'FILTER_CELL':
          case 'CLEAR_FILTER':
            item.disabled = !column.filters || !column.filters.length;

            if (!item.disabled) {
              switch (code) {
                case 'CLEAR_FILTER':
                  item.disabled = !column.filters.some(function (option) {
                    return option.checked;
                  });
                  break;
              }
            }

            break;

          case 'FIXED_LEFT_COLUMN':
            item.disabled = isChildCol || column.fixed === 'left';
            break;

          case 'FIXED_RIGHT_COLUMN':
            item.disabled = isChildCol || column.fixed === 'right';
            break;

          case 'CLEAR_FIXED_COLUMN':
            item.disabled = isChildCol || !column.fixed;
            break;
        }
      }

      break;
  }
}

function handlePrivilegeEvent(params) {
  params.options.forEach(function (list) {
    list.forEach(function (item) {
      checkPrivilege(item, params);

      if (item.children) {
        item.children.forEach(function (child) {
          checkPrivilege(child, params);
        });
      }
    });
  });
}
/**
 * 基于 vxe-table 表格的增强插件，提供实用的快捷菜单集
 */


var VXETablePluginMenus = {
  install: function install(_ref3) {
    var interceptor = _ref3.interceptor,
        menus = _ref3.menus;
    interceptor.add('event.showMenu', handlePrivilegeEvent);
    menus.mixin(menuMap);
  }
};
exports.VXETablePluginMenus = VXETablePluginMenus;

if (typeof window !== 'undefined' && window.VXETable) {
  window.VXETable.use(VXETablePluginMenus);
}

var _default = VXETablePluginMenus;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbImhhbmRsZUZpeGVkQ29sdW1uIiwiZml4ZWQiLCJwYXJhbXMiLCIkdGFibGUiLCJjb2x1bW4iLCJYRVV0aWxzIiwiZWFjaFRyZWUiLCJyZWZyZXNoQ29sdW1uIiwibWVudU1hcCIsIkNMRUFSX0NFTEwiLCJyb3ciLCJjbGVhckRhdGEiLCJwcm9wZXJ0eSIsIkNMRUFSX1JPVyIsIkNMRUFSX1NFTEVDVEVEX1JPVyIsImdldENoZWNrYm94UmVjb3JkcyIsIkNMRUFSX0FMTCIsIlJFVkVSVF9DRUxMIiwicmV2ZXJ0RGF0YSIsIlJFVkVSVF9ST1ciLCJSRVZFUlRfU0VMRUNURURfUk9XIiwiUkVWRVJUX0FMTCIsIklOU0VSVF9ST1ciLCJtZW51IiwiaW5zZXJ0IiwiSU5TRVJUX0FDVElWRURfUk9XIiwiYXJncyIsInRoZW4iLCJzZXRBY3RpdmVDZWxsIiwiSU5TRVJUX0FUX1JPVyIsImluc2VydEF0IiwiSU5TRVJUX0FUX0FDVElWRURfUk9XIiwiREVMRVRFX1JPVyIsInJlbW92ZSIsIkRFTEVURV9TRUxFQ1RFRF9ST1ciLCJyZW1vdmVDaGVja2JveFJvdyIsIkRFTEVURV9BTEwiLCJDTEVBUl9TT1JUIiwiY2xlYXJTb3J0IiwiU09SVF9BU0MiLCJzb3J0IiwiU09SVF9ERVNDIiwiQ0xFQVJfRklMVEVSIiwiY2xlYXJGaWx0ZXIiLCJDTEVBUl9BTExfRklMVEVSIiwiRklMVEVSX0NFTEwiLCJmaWx0ZXJzIiwibGVuZ3RoIiwib3B0aW9uIiwiZGF0YSIsImdldCIsImNoZWNrZWQiLCJ1cGRhdGVEYXRhIiwiRVhQT1JUX1JPVyIsIm9wdHMiLCJleHBvcnREYXRhIiwiYXNzaWduIiwiRVhQT1JUX1NFTEVDVEVEX1JPVyIsIkVYUE9SVF9BTEwiLCJQUklOVF9BTEwiLCJwcmludCIsIlBSSU5UX1NFTEVDVEVEX1JPVyIsIkhJRERFTl9DT0xVTU4iLCJoaWRlQ29sdW1uIiwiRklYRURfTEVGVF9DT0xVTU4iLCJGSVhFRF9SSUdIVF9DT0xVTU4iLCJDTEVBUl9GSVhFRF9DT0xVTU4iLCJSRVNFVF9DT0xVTU4iLCJyZXNldENvbHVtbiIsInZpc2libGUiLCJyZXNpemFibGUiLCJSRVNFVF9SRVNJWkFCTEUiLCJSRVNFVF9BTEwiLCJjaGVja1ByaXZpbGVnZSIsIml0ZW0iLCJjb2RlIiwiY29sdW1ucyIsImRpc2FibGVkIiwic29tZSIsInNvcnRhYmxlIiwib3JkZXIiLCJpc0NoaWxkQ29sIiwicGFyZW50SWQiLCJoYW5kbGVQcml2aWxlZ2VFdmVudCIsIm9wdGlvbnMiLCJmb3JFYWNoIiwibGlzdCIsImNoaWxkcmVuIiwiY2hpbGQiLCJWWEVUYWJsZVBsdWdpbk1lbnVzIiwiaW5zdGFsbCIsImludGVyY2VwdG9yIiwibWVudXMiLCJhZGQiLCJtaXhpbiIsIndpbmRvdyIsIlZYRVRhYmxlIiwidXNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0E7Ozs7QUFEQTs7QUFTQTtBQUVBLFNBQVNBLGlCQUFULENBQTRCQyxLQUE1QixFQUF5QztBQUN2QyxTQUFPLFVBQVVDLE1BQVYsRUFBZ0M7QUFBQSxRQUM3QkMsTUFENkIsR0FDVkQsTUFEVSxDQUM3QkMsTUFENkI7QUFBQSxRQUNyQkMsTUFEcUIsR0FDVkYsTUFEVSxDQUNyQkUsTUFEcUI7O0FBRXJDQyx3QkFBUUMsUUFBUixDQUFpQixDQUFDRixNQUFELENBQWpCLEVBQTJCLFVBQUFBLE1BQU0sRUFBRztBQUNsQ0EsTUFBQUEsTUFBTSxDQUFDSCxLQUFQLEdBQWVBLEtBQWY7QUFDRCxLQUZEOztBQUdBRSxJQUFBQSxNQUFNLENBQUNJLGFBQVA7QUFDRCxHQU5EO0FBT0Q7O0FBRUQsSUFBTUMsT0FBTyxHQUFHO0FBQ2Q7OztBQUdBQyxFQUFBQSxVQUpjLHNCQUlGUCxNQUpFLEVBSW9CO0FBQUEsUUFDeEJDLE1BRHdCLEdBQ0FELE1BREEsQ0FDeEJDLE1BRHdCO0FBQUEsUUFDaEJPLEdBRGdCLEdBQ0FSLE1BREEsQ0FDaEJRLEdBRGdCO0FBQUEsUUFDWE4sTUFEVyxHQUNBRixNQURBLENBQ1hF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O0FBckRKO0FBdUREOztBQUVELFNBQVNrRixvQkFBVCxDQUErQmpGLE1BQS9CLEVBQTREO0FBQzFEQSxFQUFBQSxNQUFNLENBQUNrRixPQUFQLENBQWVDLE9BQWYsQ0FBdUIsVUFBQ0MsSUFBRCxFQUFTO0FBQzlCQSxJQUFBQSxJQUFJLENBQUNELE9BQUwsQ0FBYSxVQUFDWCxJQUFELEVBQVM7QUFDcEJELE1BQUFBLGNBQWMsQ0FBQ0MsSUFBRCxFQUFPeEUsTUFBUCxDQUFkOztBQUNBLFVBQUl3RSxJQUFJLENBQUNhLFFBQVQsRUFBbUI7QUFDakJiLFFBQUFBLElBQUksQ0FBQ2EsUUFBTCxDQUFjRixPQUFkLENBQXNCLFVBQUNHLEtBQUQsRUFBVTtBQUM5QmYsVUFBQUEsY0FBYyxDQUFDZSxLQUFELEVBQVF0RixNQUFSLENBQWQ7QUFDRCxTQUZEO0FBR0Q7QUFDRixLQVBEO0FBUUQsR0FURDtBQVVEO0FBRUQ7Ozs7O0FBR08sSUFBTXVGLG1CQUFtQixHQUFHO0FBQ2pDQyxFQUFBQSxPQURpQywwQkFDZTtBQUFBLFFBQXJDQyxXQUFxQyxTQUFyQ0EsV0FBcUM7QUFBQSxRQUF4QkMsS0FBd0IsU0FBeEJBLEtBQXdCO0FBQzlDRCxJQUFBQSxXQUFXLENBQUNFLEdBQVosQ0FBZ0IsZ0JBQWhCLEVBQWtDVixvQkFBbEM7QUFDQVMsSUFBQUEsS0FBSyxDQUFDRSxLQUFOLENBQVl0RixPQUFaO0FBQ0Q7QUFKZ0MsQ0FBNUI7OztBQU9QLElBQUksT0FBT3VGLE1BQVAsS0FBa0IsV0FBbEIsSUFBaUNBLE1BQU0sQ0FBQ0MsUUFBNUMsRUFBc0Q7QUFDcERELEVBQUFBLE1BQU0sQ0FBQ0MsUUFBUCxDQUFnQkMsR0FBaEIsQ0FBb0JSLG1CQUFwQjtBQUNEOztlQUVjQSxtQiIsImZpbGUiOiJpbmRleC5jb21tb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xyXG5pbXBvcnQgWEVVdGlscyBmcm9tICd4ZS11dGlscy9tZXRob2RzL3hlLXV0aWxzJ1xyXG5pbXBvcnQge1xyXG4gIFZYRVRhYmxlLFxyXG4gIE1lbnVMaW5rUGFyYW1zLFxyXG4gIEludGVyY2VwdG9yTWVudVBhcmFtcyxcclxuICBNZW51Rmlyc3RPcHRpb24sXHJcbiAgTWVudUNoaWxkT3B0aW9uXHJcbn0gZnJvbSAndnhlLXRhYmxlL2xpYi92eGUtdGFibGUnXHJcbi8qIGVzbGludC1lbmFibGUgbm8tdW51c2VkLXZhcnMgKi9cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUZpeGVkQ29sdW1uIChmaXhlZDogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uIChwYXJhbXM6IE1lbnVMaW5rUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSwgY29sdW1uIH0gPSBwYXJhbXNcclxuICAgIFhFVXRpbHMuZWFjaFRyZWUoW2NvbHVtbl0sIGNvbHVtbiA9PiB7XHJcbiAgICAgIGNvbHVtbi5maXhlZCA9IGZpeGVkXHJcbiAgICB9KVxyXG4gICAgJHRhYmxlLnJlZnJlc2hDb2x1bW4oKVxyXG4gIH1cclxufVxyXG5cclxuY29uc3QgbWVudU1hcCA9IHtcclxuICAvKipcclxuICAgKiDmuIXpmaTljZXlhYPmoLzmlbDmja7nmoTlgLxcclxuICAgKi9cclxuICBDTEVBUl9DRUxMIChwYXJhbXM6IE1lbnVMaW5rUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSwgcm93LCBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gICAgaWYgKHJvdyAmJiBjb2x1bW4pIHtcclxuICAgICAgJHRhYmxlLmNsZWFyRGF0YShyb3csIGNvbHVtbi5wcm9wZXJ0eSlcclxuICAgIH1cclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIOa4hemZpOihjOaVsOaNrueahOWAvFxyXG4gICAqL1xyXG4gIENMRUFSX1JPVyAocGFyYW1zOiBNZW51TGlua1BhcmFtcykge1xyXG4gICAgY29uc3QgeyAkdGFibGUsIHJvdyB9ID0gcGFyYW1zXHJcbiAgICBpZiAocm93KSB7XHJcbiAgICAgICR0YWJsZS5jbGVhckRhdGEocm93KVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICog5riF6Zmk6YCJ5Lit6KGM5pWw5o2u55qE5YC8XHJcbiAgICovXHJcbiAgQ0xFQVJfU0VMRUNURURfUk9XIChwYXJhbXM6IE1lbnVMaW5rUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSB9ID0gcGFyYW1zXHJcbiAgICAkdGFibGUuY2xlYXJEYXRhKCR0YWJsZS5nZXRDaGVja2JveFJlY29yZHMoKSlcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIOa4hemZpOaJgOacieaVsOaNrueahOWAvFxyXG4gICAqL1xyXG4gIENMRUFSX0FMTCAocGFyYW1zOiBNZW51TGlua1BhcmFtcykge1xyXG4gICAgY29uc3QgeyAkdGFibGUgfSA9IHBhcmFtc1xyXG4gICAgJHRhYmxlLmNsZWFyRGF0YSgpXHJcbiAgfSxcclxuICAvKipcclxuICAgKiDov5jljp/ljZXlhYPmoLzmlbDmja7nmoTlgLxcclxuICAgKi9cclxuICBSRVZFUlRfQ0VMTCAocGFyYW1zOiBNZW51TGlua1BhcmFtcykge1xyXG4gICAgY29uc3QgeyAkdGFibGUsIHJvdywgY29sdW1uIH0gPSBwYXJhbXNcclxuICAgIGlmIChyb3cgJiYgY29sdW1uKSB7XHJcbiAgICAgICR0YWJsZS5yZXZlcnREYXRhKHJvdywgY29sdW1uLnByb3BlcnR5KVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICog6L+Y5Y6f6KGM5pWw5o2u55qE5YC8XHJcbiAgICovXHJcbiAgUkVWRVJUX1JPVyAocGFyYW1zOiBNZW51TGlua1BhcmFtcykge1xyXG4gICAgY29uc3QgeyAkdGFibGUsIHJvdyB9ID0gcGFyYW1zXHJcbiAgICBpZiAocm93KSB7XHJcbiAgICAgICR0YWJsZS5yZXZlcnREYXRhKHJvdylcclxuICAgIH1cclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIOi/mOWOn+mAieS4reihjOaVsOaNrueahOWAvFxyXG4gICAqL1xyXG4gIFJFVkVSVF9TRUxFQ1RFRF9ST1cgKHBhcmFtczogTWVudUxpbmtQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgJHRhYmxlIH0gPSBwYXJhbXNcclxuICAgICR0YWJsZS5yZXZlcnREYXRhKCR0YWJsZS5nZXRDaGVja2JveFJlY29yZHMoKSlcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIOi/mOWOn+aJgOacieaVsOaNrueahOWAvFxyXG4gICAqL1xyXG4gIFJFVkVSVF9BTEwgKHBhcmFtczogTWVudUxpbmtQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgJHRhYmxlIH0gPSBwYXJhbXNcclxuICAgICR0YWJsZS5yZXZlcnREYXRhKClcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIOaPkuWFpeaVsOaNrlxyXG4gICAqL1xyXG4gIElOU0VSVF9ST1cgKHBhcmFtczogTWVudUxpbmtQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgJHRhYmxlLCBtZW51IH0gPSBwYXJhbXNcclxuICAgICR0YWJsZS5pbnNlcnQobWVudS5wYXJhbXMpXHJcbiAgfSxcclxuICAvKipcclxuICAgKiDmj5LlhaXmlbDmja7lubbmv4DmtLvnvJbovpHnirbmgIFcclxuICAgKi9cclxuICBJTlNFUlRfQUNUSVZFRF9ST1cgKHBhcmFtczogTWVudUxpbmtQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgJHRhYmxlLCBtZW51LCBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gICAgY29uc3QgYXJnczogYW55W10gPSBtZW51LnBhcmFtcyB8fCBbXVxyXG4gICAgJHRhYmxlLmluc2VydChhcmdzWzBdKVxyXG4gICAgICAudGhlbigoeyByb3cgfSkgPT4gJHRhYmxlLnNldEFjdGl2ZUNlbGwocm93LCBhcmdzWzFdIHx8IGNvbHVtbi5wcm9wZXJ0eSkpXHJcbiAgfSxcclxuICAvKipcclxuICAgKiDmj5LlhaXmlbDmja7liLDmjIflrprkvY3nva5cclxuICAgKi9cclxuICBJTlNFUlRfQVRfUk9XIChwYXJhbXM6IE1lbnVMaW5rUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSwgbWVudSwgcm93IH0gPSBwYXJhbXNcclxuICAgIGlmIChyb3cpIHtcclxuICAgICAgJHRhYmxlLmluc2VydEF0KG1lbnUucGFyYW1zLCByb3cpXHJcbiAgICB9XHJcbiAgfSxcclxuICAvKipcclxuICAgKiDmj5LlhaXmlbDmja7liLDmjIflrprkvY3nva7lubbmv4DmtLvnvJbovpHnirbmgIFcclxuICAgKi9cclxuICBJTlNFUlRfQVRfQUNUSVZFRF9ST1cgKHBhcmFtczogTWVudUxpbmtQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgJHRhYmxlLCBtZW51LCByb3csIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgICBpZiAocm93KSB7XHJcbiAgICAgIGNvbnN0IGFyZ3M6IGFueVtdID0gbWVudS5wYXJhbXMgfHwgW11cclxuICAgICAgJHRhYmxlLmluc2VydEF0KGFyZ3NbMF0sIHJvdylcclxuICAgICAgICAudGhlbigoeyByb3cgfSkgPT4gJHRhYmxlLnNldEFjdGl2ZUNlbGwocm93LCBhcmdzWzFdIHx8IGNvbHVtbi5wcm9wZXJ0eSkpXHJcbiAgICB9XHJcbiAgfSxcclxuICAvKipcclxuICAgKiDnp7vpmaTooYzmlbDmja5cclxuICAgKi9cclxuICBERUxFVEVfUk9XIChwYXJhbXM6IE1lbnVMaW5rUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSwgcm93IH0gPSBwYXJhbXNcclxuICAgIGlmIChyb3cpIHtcclxuICAgICAgJHRhYmxlLnJlbW92ZShyb3cpXHJcbiAgICB9XHJcbiAgfSxcclxuICAvKipcclxuICAgKiDnp7vpmaTpgInkuK3ooYzmlbDmja5cclxuICAgKi9cclxuICBERUxFVEVfU0VMRUNURURfUk9XIChwYXJhbXM6IE1lbnVMaW5rUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSB9ID0gcGFyYW1zXHJcbiAgICAkdGFibGUucmVtb3ZlQ2hlY2tib3hSb3coKVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICog56e76Zmk5omA5pyJ6KGM5pWw5o2uXHJcbiAgICovXHJcbiAgREVMRVRFX0FMTCAocGFyYW1zOiBNZW51TGlua1BhcmFtcykge1xyXG4gICAgY29uc3QgeyAkdGFibGUgfSA9IHBhcmFtc1xyXG4gICAgJHRhYmxlLnJlbW92ZSgpXHJcbiAgfSxcclxuICAvKipcclxuICAgKiDmuIXpmaTmjpLluo/mnaHku7ZcclxuICAgKi9cclxuICBDTEVBUl9TT1JUIChwYXJhbXM6IE1lbnVMaW5rUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSB9ID0gcGFyYW1zXHJcbiAgICAkdGFibGUuY2xlYXJTb3J0KClcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIOaMieaJgOmAieWIl+eahOWAvOWNh+W6j1xyXG4gICAqL1xyXG4gIFNPUlRfQVNDIChwYXJhbXM6IE1lbnVMaW5rUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSwgY29sdW1uIH0gPSBwYXJhbXNcclxuICAgIGlmIChjb2x1bW4pIHtcclxuICAgICAgJHRhYmxlLnNvcnQoY29sdW1uLnByb3BlcnR5LCAnYXNjJylcclxuICAgIH1cclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIOaMieaJgOmAieWIl+eahOWAvOWAkuW6j1xyXG4gICAqL1xyXG4gIFNPUlRfREVTQyAocGFyYW1zOiBNZW51TGlua1BhcmFtcykge1xyXG4gICAgY29uc3QgeyAkdGFibGUsIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgICBpZiAoY29sdW1uKSB7XHJcbiAgICAgICR0YWJsZS5zb3J0KGNvbHVtbi5wcm9wZXJ0eSwgJ2Rlc2MnKVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICog5riF6Zmk6YCJ5Lit5YiX55qE562b6YCJ5p2h5Lu2XHJcbiAgICovXHJcbiAgQ0xFQVJfRklMVEVSIChwYXJhbXM6IE1lbnVMaW5rUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSwgY29sdW1uIH0gPSBwYXJhbXNcclxuICAgIGlmIChjb2x1bW4pIHtcclxuICAgICAgJHRhYmxlLmNsZWFyRmlsdGVyKGNvbHVtbilcclxuICAgIH1cclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIOa4hemZpOaJgOacieWIl+etm+mAieadoeS7tlxyXG4gICAqL1xyXG4gIENMRUFSX0FMTF9GSUxURVIgKHBhcmFtczogTWVudUxpbmtQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgJHRhYmxlIH0gPSBwYXJhbXNcclxuICAgICR0YWJsZS5jbGVhckZpbHRlcigpXHJcbiAgfSxcclxuICAvKipcclxuICAgKiDmoLnmja7ljZXlhYPmoLzlgLznrZvpgIlcclxuICAgKi9cclxuICBGSUxURVJfQ0VMTCAocGFyYW1zOiBNZW51TGlua1BhcmFtcykge1xyXG4gICAgY29uc3QgeyAkdGFibGUsIHJvdywgY29sdW1uIH0gPSBwYXJhbXNcclxuICAgIGlmIChyb3cgJiYgY29sdW1uKSB7XHJcbiAgICAgIGxldCB7IHByb3BlcnR5LCBmaWx0ZXJzIH0gPSBjb2x1bW5cclxuICAgICAgaWYgKGZpbHRlcnMubGVuZ3RoKSB7XHJcbiAgICAgICAgbGV0IG9wdGlvbiA9IGZpbHRlcnNbMF1cclxuICAgICAgICBvcHRpb24uZGF0YSA9IFhFVXRpbHMuZ2V0KHJvdywgcHJvcGVydHkpXHJcbiAgICAgICAgb3B0aW9uLmNoZWNrZWQgPSB0cnVlXHJcbiAgICAgICAgJHRhYmxlLnVwZGF0ZURhdGEoKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxuICAvKipcclxuICAgKiDlr7zlh7rooYzmlbDmja5cclxuICAgKi9cclxuICBFWFBPUlRfUk9XIChwYXJhbXM6IE1lbnVMaW5rUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSwgbWVudSwgcm93IH0gPSBwYXJhbXNcclxuICAgIGlmIChyb3cpIHtcclxuICAgICAgbGV0IG9wdHMgPSB7IGRhdGE6IFtyb3ddIH1cclxuICAgICAgJHRhYmxlLmV4cG9ydERhdGEoWEVVdGlscy5hc3NpZ24ob3B0cywgbWVudS5wYXJhbXNbMF0pKVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICog5a+85Ye66YCJ5Lit6KGM5pWw5o2uXHJcbiAgICovXHJcbiAgRVhQT1JUX1NFTEVDVEVEX1JPVyAocGFyYW1zOiBNZW51TGlua1BhcmFtcykge1xyXG4gICAgY29uc3QgeyAkdGFibGUsIG1lbnUgfSA9IHBhcmFtc1xyXG4gICAgbGV0IG9wdHMgPSB7IGRhdGE6ICR0YWJsZS5nZXRDaGVja2JveFJlY29yZHMoKSB9XHJcbiAgICAkdGFibGUuZXhwb3J0RGF0YShYRVV0aWxzLmFzc2lnbihvcHRzLCBtZW51LnBhcmFtc1swXSkpXHJcbiAgfSxcclxuICAvKipcclxuICAgKiDlr7zlh7rmiYDmnInooYzmlbDmja5cclxuICAgKi9cclxuICBFWFBPUlRfQUxMIChwYXJhbXM6IE1lbnVMaW5rUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSwgbWVudSB9ID0gcGFyYW1zXHJcbiAgICAkdGFibGUuZXhwb3J0RGF0YShtZW51LnBhcmFtcylcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIOaJk+WNsOaJgOacieihjOaVsOaNrlxyXG4gICAqL1xyXG4gIFBSSU5UX0FMTCAocGFyYW1zOiBNZW51TGlua1BhcmFtcykge1xyXG4gICAgY29uc3QgeyAkdGFibGUsIG1lbnUgfSA9IHBhcmFtc1xyXG4gICAgJHRhYmxlLnByaW50KG1lbnUucGFyYW1zKVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICog5omT5Y2w6YCJ5Lit6KGMXHJcbiAgICovXHJcbiAgUFJJTlRfU0VMRUNURURfUk9XIChwYXJhbXM6IE1lbnVMaW5rUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSwgbWVudSB9ID0gcGFyYW1zXHJcbiAgICBsZXQgb3B0cyA9IHsgZGF0YTogJHRhYmxlLmdldENoZWNrYm94UmVjb3JkcygpIH1cclxuICAgICR0YWJsZS5wcmludChYRVV0aWxzLmFzc2lnbihvcHRzLCBtZW51LnBhcmFtcykpXHJcbiAgfSxcclxuICAvKipcclxuICAgKiDpmpDol4/lvZPliY3liJdcclxuICAgKi9cclxuICBISURERU5fQ09MVU1OIChwYXJhbXM6IE1lbnVMaW5rUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSwgY29sdW1uIH0gPSBwYXJhbXNcclxuICAgIGlmIChjb2x1bW4pIHtcclxuICAgICAgJHRhYmxlLmhpZGVDb2x1bW4oY29sdW1uKVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICog5bCG5YiX5Zu65a6a5Yiw5bem5L6nXHJcbiAgICovXHJcbiAgRklYRURfTEVGVF9DT0xVTU46IGhhbmRsZUZpeGVkQ29sdW1uKCdsZWZ0JyksXHJcbiAgLyoqXHJcbiAgICog5bCG5YiX5Zu65a6a5Yiw5Y+z5L6nXHJcbiAgICovXHJcbiAgRklYRURfUklHSFRfQ09MVU1OOiBoYW5kbGVGaXhlZENvbHVtbigncmlnaHQnKSxcclxuICAvKipcclxuICAgKiDmuIXpmaTlm7rlrprliJdcclxuICAgKi9cclxuICBDTEVBUl9GSVhFRF9DT0xVTU46IGhhbmRsZUZpeGVkQ29sdW1uKCcnKSxcclxuICAvKipcclxuICAgKiDph43nva7liJfnmoTlj6/op4bnirbmgIFcclxuICAgKi9cclxuICBSRVNFVF9DT0xVTU4gKHBhcmFtczogTWVudUxpbmtQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgJHRhYmxlIH0gPSBwYXJhbXNcclxuICAgICR0YWJsZS5yZXNldENvbHVtbih7IHZpc2libGU6IHRydWUsIHJlc2l6YWJsZTogZmFsc2UgfSlcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIOmHjee9ruWIl+WuveeKtuaAgVxyXG4gICAqL1xyXG4gIFJFU0VUX1JFU0laQUJMRSAocGFyYW1zOiBNZW51TGlua1BhcmFtcykge1xyXG4gICAgY29uc3QgeyAkdGFibGUgfSA9IHBhcmFtc1xyXG4gICAgJHRhYmxlLnJlc2V0Q29sdW1uKHsgdmlzaWJsZTogZmFsc2UsIHJlc2l6YWJsZTogdHJ1ZSB9KVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICog6YeN572u5YiX55qE5omA5pyJ54q25oCBXHJcbiAgICovXHJcbiAgUkVTRVRfQUxMIChwYXJhbXM6IE1lbnVMaW5rUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSB9ID0gcGFyYW1zXHJcbiAgICAkdGFibGUucmVzZXRDb2x1bW4odHJ1ZSlcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrUHJpdmlsZWdlIChpdGVtOiBNZW51Rmlyc3RPcHRpb24gfCBNZW51Q2hpbGRPcHRpb24sIHBhcmFtczogSW50ZXJjZXB0b3JNZW51UGFyYW1zKSB7XHJcbiAgbGV0IHsgY29kZSB9ID0gaXRlbVxyXG4gIGxldCB7IGNvbHVtbnMsIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgc3dpdGNoIChjb2RlKSB7XHJcbiAgICBjYXNlICdDTEVBUl9TT1JUJzpcclxuICAgICAgaXRlbS5kaXNhYmxlZCA9ICFjb2x1bW5zLnNvbWUoKGNvbHVtbikgPT4gY29sdW1uLnNvcnRhYmxlICYmIGNvbHVtbi5vcmRlcilcclxuICAgICAgYnJlYWtcclxuICAgIGNhc2UgJ0NMRUFSX0FMTF9GSUxURVInOlxyXG4gICAgICBpdGVtLmRpc2FibGVkID0gIWNvbHVtbnMuc29tZSgoY29sdW1uKSA9PiBjb2x1bW4uZmlsdGVycyAmJiBjb2x1bW4uZmlsdGVycy5zb21lKChvcHRpb24pID0+IG9wdGlvbi5jaGVja2VkKSlcclxuICAgICAgYnJlYWtcclxuICAgIGNhc2UgJ0NMRUFSX0NFTEwnOlxyXG4gICAgY2FzZSAnQ0xFQVJfUk9XJzpcclxuICAgIGNhc2UgJ1JFVkVSVF9DRUxMJzpcclxuICAgIGNhc2UgJ1JFVkVSVF9ST1cnOlxyXG4gICAgY2FzZSAnSU5TRVJUX0FUX1JPVyc6XHJcbiAgICBjYXNlICdJTlNFUlRfQVRfQUNUSVZFRF9ST1cnOlxyXG4gICAgY2FzZSAnREVMRVRFX1JPVyc6XHJcbiAgICBjYXNlICdTT1JUX0FTQyc6XHJcbiAgICBjYXNlICdTT1JUX0RFU0MnOlxyXG4gICAgY2FzZSAnQ0xFQVJfRklMVEVSJzpcclxuICAgIGNhc2UgJ0ZJTFRFUl9DRUxMJzpcclxuICAgIGNhc2UgJ0VYUE9SVF9ST1cnOlxyXG4gICAgY2FzZSAnSElEREVOX0NPTFVNTic6XHJcbiAgICBjYXNlICdGSVhFRF9MRUZUX0NPTFVNTic6XHJcbiAgICBjYXNlICdGSVhFRF9SSUdIVF9DT0xVTU4nOlxyXG4gICAgY2FzZSAnQ0xFQVJfRklYRURfQ09MVU1OJzpcclxuICAgICAgaXRlbS5kaXNhYmxlZCA9ICFjb2x1bW5cclxuICAgICAgaWYgKGNvbHVtbikge1xyXG4gICAgICAgIGNvbnN0IGlzQ2hpbGRDb2wgPSAhIWNvbHVtbi5wYXJlbnRJZFxyXG4gICAgICAgIHN3aXRjaCAoY29kZSkge1xyXG4gICAgICAgICAgY2FzZSAnU09SVF9BU0MnOlxyXG4gICAgICAgICAgY2FzZSAnU09SVF9ERVNDJzpcclxuICAgICAgICAgICAgaXRlbS5kaXNhYmxlZCA9ICFjb2x1bW4uc29ydGFibGVcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ0ZJTFRFUl9DRUxMJzpcclxuICAgICAgICAgIGNhc2UgJ0NMRUFSX0ZJTFRFUic6XHJcbiAgICAgICAgICAgIGl0ZW0uZGlzYWJsZWQgPSAhY29sdW1uLmZpbHRlcnMgfHwgIWNvbHVtbi5maWx0ZXJzLmxlbmd0aFxyXG4gICAgICAgICAgICBpZiAoIWl0ZW0uZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgICBzd2l0Y2ggKGNvZGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ0NMRUFSX0ZJTFRFUic6XHJcbiAgICAgICAgICAgICAgICAgIGl0ZW0uZGlzYWJsZWQgPSAhY29sdW1uLmZpbHRlcnMuc29tZSgob3B0aW9uKSA9PiBvcHRpb24uY2hlY2tlZClcclxuICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ0ZJWEVEX0xFRlRfQ09MVU1OJzpcclxuICAgICAgICAgICAgaXRlbS5kaXNhYmxlZCA9IGlzQ2hpbGRDb2wgfHwgY29sdW1uLmZpeGVkID09PSAnbGVmdCdcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ0ZJWEVEX1JJR0hUX0NPTFVNTic6XHJcbiAgICAgICAgICAgIGl0ZW0uZGlzYWJsZWQgPSBpc0NoaWxkQ29sIHx8IGNvbHVtbi5maXhlZCA9PT0gJ3JpZ2h0J1xyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAnQ0xFQVJfRklYRURfQ09MVU1OJzpcclxuICAgICAgICAgICAgaXRlbS5kaXNhYmxlZCA9IGlzQ2hpbGRDb2wgfHwgIWNvbHVtbi5maXhlZFxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBicmVha1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJpdmlsZWdlRXZlbnQgKHBhcmFtczogSW50ZXJjZXB0b3JNZW51UGFyYW1zKSB7XHJcbiAgcGFyYW1zLm9wdGlvbnMuZm9yRWFjaCgobGlzdCkgPT4ge1xyXG4gICAgbGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIGNoZWNrUHJpdmlsZWdlKGl0ZW0sIHBhcmFtcylcclxuICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4pIHtcclxuICAgICAgICBpdGVtLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiB7XHJcbiAgICAgICAgICBjaGVja1ByaXZpbGVnZShjaGlsZCwgcGFyYW1zKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfSlcclxufVxyXG5cclxuLyoqXHJcbiAqIOWfuuS6jiB2eGUtdGFibGUg6KGo5qC855qE5aKe5by65o+S5Lu277yM5o+Q5L6b5a6e55So55qE5b+r5o236I+c5Y2V6ZuGXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgVlhFVGFibGVQbHVnaW5NZW51cyA9IHtcclxuICBpbnN0YWxsICh7IGludGVyY2VwdG9yLCBtZW51cyB9OiB0eXBlb2YgVlhFVGFibGUpIHtcclxuICAgIGludGVyY2VwdG9yLmFkZCgnZXZlbnQuc2hvd01lbnUnLCBoYW5kbGVQcml2aWxlZ2VFdmVudClcclxuICAgIG1lbnVzLm1peGluKG1lbnVNYXApXHJcbiAgfVxyXG59XHJcblxyXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LlZYRVRhYmxlKSB7XHJcbiAgd2luZG93LlZYRVRhYmxlLnVzZShWWEVUYWJsZVBsdWdpbk1lbnVzKVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBWWEVUYWJsZVBsdWdpbk1lbnVzXHJcbiJdfQ==
